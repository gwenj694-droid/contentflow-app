<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ContentFlow - Social Media Planner</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&display=swap');
        body { font-family: 'Inter', sans-serif; }
        .gradient-bg { background: linear-gradient(135deg, #c084fc 0%, #1f2937 100%); }
        .card-shadow { box-shadow: 0 10px 25px rgba(0,0,0,0.1); }
        .platform-card { transition: all 0.3s ease; }
        .platform-card:hover { transform: translateY(-2px); }
        .calendar-day { transition: all 0.2s ease; }
        .calendar-day:hover { background-color: #f3f4f6; }
        .post-item { animation: slideIn 0.3s ease-out; }
        @keyframes slideIn {
            from { opacity: 0; transform: translateY(10px); }
            to { opacity: 1; transform: translateY(0); }
        }
        .pro-badge { 
            background: linear-gradient(45deg, #ffd700, #ffed4e);
            animation: shimmer 2s infinite;
        }
        @keyframes shimmer {
            0% { background-position: -200% center; }
            100% { background-position: 200% center; }
        }
    </style>
</head>
<body class="bg-gray-50 min-h-screen">
    <!-- Header -->
    <header class="gradient-bg text-white shadow-lg">
        <div class="container mx-auto px-6 py-4">
            <div class="flex items-center justify-between">
                <div class="flex items-center space-x-3">
                    <div class="w-10 h-10 bg-white rounded-lg flex items-center justify-center">
                        <span class="text-2xl">üìÖ</span>
                    </div>
                    <h1 class="text-2xl font-bold">ContentFlow</h1>
                    <span class="text-xs bg-white/20 px-2 py-1 rounded-full">Free Version</span>
                </div>
                <div class="flex items-center space-x-4">
                    <button class="bg-white/20 hover:bg-white/30 px-4 py-2 rounded-lg transition-colors">
                        Analytics
                    </button>
                    <button onclick="upgradeToPro()" class="pro-badge text-black px-4 py-2 rounded-lg font-bold transition-all hover:scale-105 flex items-center space-x-2">
                        <span>‚≠ê</span>
                        <span>Upgrade to Pro</span>
                    </button>
                    <button class="bg-white text-black hover:bg-gray-100 px-4 py-2 rounded-lg font-medium transition-colors">
                        Settings
                    </button>
                </div>
            </div>
        </div>
    </header>

    <!-- Pro Features Banner -->
    <div class="bg-gradient-to-r from-yellow-400 to-orange-500 text-black py-3">
        <div class="container mx-auto px-6">
            <div class="flex items-center justify-between">
                <div class="flex items-center space-x-4">
                    <span class="font-semibold">üöÄ Unlock Pro Features:</span>
                    <span class="text-sm">Unlimited posts ‚Ä¢ Cloud sync ‚Ä¢ Team collaboration ‚Ä¢ Advanced analytics</span>
                </div>
                <button onclick="upgradeToPro()" class="bg-black text-white px-4 py-2 rounded-lg font-medium hover:bg-gray-800 transition-colors">
                    Get Pro Now
                </button>
            </div>
        </div>
    </div>

    <div class="container mx-auto px-6 py-8">
        <div class="grid grid-cols-1 lg:grid-cols-3 gap-8">
            <!-- Left Panel - Platform Connections & Quick Actions -->
            <div class="lg:col-span-1 space-y-6">
                <!-- Upgrade Card -->
                <div class="bg-gradient-to-br from-yellow-50 to-orange-50 border-2 border-yellow-200 rounded-xl p-6">
                    <div class="text-center">
                        <div class="w-16 h-16 bg-yellow-400 rounded-full flex items-center justify-center mx-auto mb-4">
                            <span class="text-2xl">‚≠ê</span>
                        </div>
                        <h3 class="text-xl font-bold text-gray-800 mb-2">Upgrade to Pro</h3>
                        <p class="text-gray-600 text-sm mb-4">Unlock unlimited posts, cloud sync, team features, and advanced analytics</p>
                        <button onclick="upgradeToPro()" class="w-full bg-yellow-400 hover:bg-yellow-500 text-black py-3 px-4 rounded-lg font-bold transition-colors">
                            Get Pro - $9.99/month
                        </button>
                        <p class="text-xs text-gray-500 mt-2">30-day money-back guarantee</p>
                    </div>
                </div>

                <!-- Platform Connections -->
                <div class="bg-white rounded-xl card-shadow p-6">
                    <h2 class="text-xl font-semibold mb-4 flex items-center">
                        <span class="mr-2">üîó</span>
                        Connected Platforms
                    </h2>
                    <div class="space-y-3">
                        <div class="platform-card bg-blue-50 border border-blue-200 rounded-lg p-4 cursor-pointer" onclick="togglePlatform('linkedin')">
                            <div class="flex items-center justify-between">
                                <div class="flex items-center space-x-3">
                                    <div class="w-8 h-8 bg-blue-600 rounded flex items-center justify-center text-white font-bold text-sm">in</div>
                                    <span class="font-medium">LinkedIn</span>
                                </div>
                                <div class="flex items-center space-x-2">
                                    <span class="text-green-600 text-sm">Connected</span>
                                    <div class="w-3 h-3 bg-green-500 rounded-full"></div>
                                </div>
                            </div>
                        </div>
                        
                        <div class="platform-card bg-pink-50 border border-pink-200 rounded-lg p-4 cursor-pointer" onclick="togglePlatform('instagram')">
                            <div class="flex items-center justify-between">
                                <div class="flex items-center space-x-3">
                                    <div class="w-8 h-8 bg-gradient-to-br from-purple-500 to-pink-500 rounded flex items-center justify-center text-white font-bold text-sm">üì∑</div>
                                    <span class="font-medium">Instagram</span>
                                </div>
                                <div class="flex items-center space-x-2">
                                    <span class="text-green-600 text-sm">Connected</span>
                                    <div class="w-3 h-3 bg-green-500 rounded-full"></div>
                                </div>
                            </div>
                        </div>
                        
                        <div class="platform-card bg-blue-50 border border-blue-200 rounded-lg p-4 cursor-pointer" onclick="togglePlatform('twitter')">
                            <div class="flex items-center justify-between">
                                <div class="flex items-center space-x-3">
                                    <div class="w-8 h-8 bg-blue-400 rounded flex items-center justify-center text-white font-bold text-sm">ùïè</div>
                                    <span class="font-medium">X (Twitter)</span>
                                </div>
                                <div class="flex items-center space-x-2">
                                    <span class="text-green-600 text-sm">Connected</span>
                                    <div class="w-3 h-3 bg-green-500 rounded-full"></div>
                                </div>
                            </div>
                        </div>
                        
                        <div class="platform-card bg-black border border-gray-300 rounded-lg p-4 cursor-pointer" onclick="showProFeature('TikTok integration')">
                            <div class="flex items-center justify-between">
                                <div class="flex items-center space-x-3">
                                    <div class="w-8 h-8 bg-black rounded flex items-center justify-center text-white font-bold text-sm">üéµ</div>
                                    <span class="font-medium text-white">TikTok</span>
                                </div>
                                <div class="flex items-center space-x-2">
                                    <span class="text-yellow-400 text-xs font-bold">PRO</span>
                                    <div class="w-3 h-3 bg-yellow-400 rounded-full"></div>
                                </div>
                            </div>
                        </div>
                        
                        <div class="platform-card bg-gray-50 border border-gray-200 rounded-lg p-4 cursor-pointer" onclick="showProFeature('Facebook integration')">
                            <div class="flex items-center justify-between">
                                <div class="flex items-center space-x-3">
                                    <div class="w-8 h-8 bg-blue-600 rounded flex items-center justify-center text-white font-bold text-sm">f</div>
                                    <span class="font-medium">Facebook</span>
                                </div>
                                <div class="flex items-center space-x-2">
                                    <span class="text-yellow-600 text-xs font-bold">PRO</span>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Quick Actions -->
                <div class="bg-white rounded-xl card-shadow p-6">
                    <h2 class="text-xl font-semibold mb-4 flex items-center">
                        <span class="mr-2">‚ö°</span>
                        Quick Actions
                    </h2>
                    <div class="space-y-3">
                        <button onclick="openCreatePost()" class="w-full bg-purple-400 hover:bg-purple-500 text-black py-3 px-4 rounded-lg font-medium transition-colors flex items-center justify-center space-x-2">
                            <span>‚úèÔ∏è</span>
                            <span>Create New Post</span>
                        </button>
                        <button onclick="showTodaysPosts()" class="w-full bg-green-600 hover:bg-green-700 text-white py-3 px-4 rounded-lg font-medium transition-colors flex items-center justify-center space-x-2">
                            <span>üìã</span>
                            <span>Today's Posts</span>
                        </button>
                        <button onclick="showProFeature('Advanced Analytics')" class="w-full bg-gray-800 hover:bg-black text-white py-3 px-4 rounded-lg font-medium transition-colors flex items-center justify-center space-x-2">
                            <span>üìä</span>
                            <span>View Analytics</span>
                            <span class="text-xs bg-yellow-400 text-black px-2 py-1 rounded-full">PRO</span>
                        </button>
                    </div>
                </div>

                <!-- Today's Scheduled Posts -->
                <div class="bg-white rounded-xl card-shadow p-6">
                    <h2 class="text-xl font-semibold mb-4 flex items-center">
                        <span class="mr-2">üïê</span>
                        Today's Schedule
                    </h2>
                    <div id="todaysSchedule" class="space-y-3">
                        <!-- Today's posts will be populated here -->
                    </div>
                </div>
            </div>

            <!-- Center Panel - Calendar & Content Planning -->
            <div class="lg:col-span-2 space-y-6">
                <!-- Calendar View -->
                <div class="bg-white rounded-xl card-shadow p-6">
                    <div class="flex items-center justify-between mb-6">
                        <h2 class="text-xl font-semibold flex items-center">
                            <span class="mr-2">üìÖ</span>
                            Content Calendar
                        </h2>
                        <div class="flex items-center space-x-4">
                            <button onclick="previousMonth()" class="p-2 hover:bg-gray-100 rounded-lg">
                                <span class="text-xl">‚Üê</span>
                            </button>
                            <span id="currentMonth" class="font-semibold text-lg"></span>
                            <button onclick="nextMonth()" class="p-2 hover:bg-gray-100 rounded-lg">
                                <span class="text-xl">‚Üí</span>
                            </button>
                        </div>
                    </div>
                    
                    <div id="calendar" class="grid grid-cols-7 gap-1">
                        <!-- Calendar will be generated here -->
                    </div>
                </div>

                <!-- Scheduled Posts for Selected Date -->
                <div class="bg-white rounded-xl card-shadow p-6">
                    <h2 class="text-xl font-semibold mb-4 flex items-center">
                        <span class="mr-2">üìù</span>
                        Posts for <span id="selectedDate" class="text-purple-400 ml-1">Today</span>
                    </h2>
                    <div id="scheduledPosts" class="space-y-4">
                        <!-- Scheduled posts will be shown here -->
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Create Post Modal -->
    <div id="createPostModal" class="fixed inset-0 bg-black bg-opacity-50 hidden items-center justify-center z-50">
        <div class="bg-white rounded-xl p-8 max-w-2xl w-full mx-4 max-h-[90vh] overflow-y-auto">
            <div class="flex items-center justify-between mb-6">
                <h3 class="text-2xl font-semibold">Create New Post</h3>
                <button onclick="closeCreatePost()" class="text-gray-500 hover:text-gray-700 text-2xl">√ó</button>
            </div>
            
            <!-- Free Version Limitation Notice -->
            <div class="bg-yellow-50 border border-yellow-200 rounded-lg p-4 mb-6">
                <div class="flex items-center space-x-2">
                    <span class="text-yellow-600">‚ö†Ô∏è</span>
                    <span class="text-sm text-yellow-800">Free version: Limited to 5 posts per month. <button onclick="upgradeToPro()" class="text-yellow-900 underline font-medium">Upgrade to Pro</button> for unlimited posts.</span>
                </div>
            </div>
            
            <form id="postForm" class="space-y-6">
                <div>
                    <label class="block text-sm font-medium mb-2">Select Platforms</label>
                    <div class="grid grid-cols-2 gap-3">
                        <label class="flex items-center space-x-2 cursor-pointer">
                            <input type="checkbox" name="platforms" value="linkedin" class="rounded">
                            <span>LinkedIn</span>
                        </label>
                        <label class="flex items-center space-x-2 cursor-pointer">
                            <input type="checkbox" name="platforms" value="instagram" class="rounded">
                            <span>Instagram</span>
                        </label>
                        <label class="flex items-center space-x-2 cursor-pointer">
                            <input type="checkbox" name="platforms" value="twitter" class="rounded">
                            <span>X (Twitter)</span>
                        </label>
                        <label class="flex items-center space-x-2 cursor-pointer opacity-50">
                            <input type="checkbox" name="platforms" value="tiktok" class="rounded" disabled>
                            <span>TikTok <span class="text-xs text-yellow-600 font-bold">PRO</span></span>
                        </label>
                        <label class="flex items-center space-x-2 cursor-pointer opacity-50">
                            <input type="checkbox" name="platforms" value="facebook" class="rounded" disabled>
                            <span>Facebook <span class="text-xs text-yellow-600 font-bold">PRO</span></span>
                        </label>
                    </div>
                </div>
                
                <div>
                    <label class="block text-sm font-medium mb-2">Post Content</label>
                    <textarea id="postContent" rows="6" class="w-full border border-gray-300 rounded-lg px-4 py-3 focus:ring-2 focus:ring-purple-400 focus:border-transparent" placeholder="What's on your mind? Share your insights, tips, or inspiration..."></textarea>
                    <div class="text-right text-sm text-gray-500 mt-1">
                        <span id="charCount">0</span> characters
                    </div>
                </div>
                
                <div class="grid grid-cols-2 gap-4">
                    <div>
                        <label class="block text-sm font-medium mb-2">Schedule Date</label>
                        <input type="date" id="scheduleDate" class="w-full border border-gray-300 rounded-lg px-4 py-3 focus:ring-2 focus:ring-purple-400 focus:border-transparent">
                    </div>
                    <div>
                        <label class="block text-sm font-medium mb-2">Schedule Time</label>
                        <input type="time" id="scheduleTime" class="w-full border border-gray-300 rounded-lg px-4 py-3 focus:ring-2 focus:ring-purple-400 focus:border-transparent">
                    </div>
                </div>
                
                <div>
                    <label class="block text-sm font-medium mb-2">Post Type</label>
                    <select id="postType" class="w-full border border-gray-300 rounded-lg px-4 py-3 focus:ring-2 focus:ring-purple-400 focus:border-transparent" onchange="toggleImageUpload()">
                        <option value="text">Text Post</option>
                        <option value="image">Image Post</option>
                        <option value="video">Video Post</option>
                        <option value="article">Article/Blog</option>
                        <option value="poll">Poll</option>
                    </select>
                </div>
                
                <!-- Image Upload Section -->
                <div id="imageUploadSection" class="hidden">
                    <label class="block text-sm font-medium mb-2">Upload Image</label>
                    <div class="border-2 border-dashed border-gray-300 rounded-lg p-6 text-center hover:border-purple-400 transition-colors">
                        <input type="file" id="imageUpload" accept="image/*" class="hidden" onchange="handleImageUpload(event)">
                        <div id="uploadArea" onclick="document.getElementById('imageUpload').click()" class="cursor-pointer">
                            <div class="text-4xl mb-2">üì∏</div>
                            <p class="text-gray-600 mb-2">Click to upload an image</p>
                            <p class="text-sm text-gray-500">PNG, JPG, GIF up to 10MB</p>
                        </div>
                        <div id="imagePreview" class="hidden">
                            <img id="previewImg" class="max-w-full h-48 object-cover rounded-lg mx-auto mb-3" alt="Preview">
                            <div class="flex items-center justify-center space-x-4">
                                <button type="button" onclick="removeImage()" class="text-red-600 hover:text-red-800 text-sm">
                                    Remove Image
                                </button>
                                <button type="button" onclick="document.getElementById('imageUpload').click()" class="text-purple-600 hover:text-purple-800 text-sm">
                                    Change Image
                                </button>
                            </div>
                        </div>
                    </div>
                </div>
                
                <div class="flex space-x-4">
                    <button type="button" onclick="savePost()" class="flex-1 bg-purple-400 hover:bg-purple-500 text-black py-3 px-6 rounded-lg font-medium transition-colors">
                        Schedule Post
                    </button>
                    <button type="button" onclick="closeCreatePost()" class="px-6 py-3 border border-gray-300 rounded-lg hover:bg-gray-50 transition-colors">
                        Cancel
                    </button>
                </div>
            </form>
        </div>
    </div>

    <!-- Pro Feature Modal -->
    <div id="proFeatureModal" class="fixed inset-0 bg-black bg-opacity-50 hidden items-center justify-center z-50">
        <div class="bg-white rounded-xl p-8 max-w-md w-full mx-4">
            <div class="text-center">
                <div class="w-16 h-16 bg-yellow-100 rounded-full flex items-center justify-center mx-auto mb-4">
                    <span class="text-2xl">‚≠ê</span>
                </div>
                <h3 class="text-xl font-semibold mb-2">Pro Feature</h3>
                <p id="proFeatureText" class="text-gray-600 mb-6">This feature is available in ContentFlow Pro.</p>
                
                <div class="space-y-3 mb-6">
                    <button onclick="upgradeToPro()" class="w-full bg-yellow-400 hover:bg-yellow-500 text-black py-3 px-4 rounded-lg font-bold transition-colors">
                        Upgrade to Pro - $9.99/month
                    </button>
                    <button onclick="closeProFeature()" class="w-full bg-gray-200 hover:bg-gray-300 text-gray-800 py-2 px-4 rounded-lg transition-colors">
                        Maybe Later
                    </button>
                </div>
                
                <p class="text-xs text-gray-500">30-day money-back guarantee</p>
            </div>
        </div>
    </div>

    <!-- Post Now Modal -->
    <div id="postNowModal" class="fixed inset-0 bg-black bg-opacity-50 hidden items-center justify-center z-50">
        <div class="bg-white rounded-xl p-8 max-w-md w-full mx-4">
            <div class="text-center">
                <div class="w-16 h-16 bg-green-100 rounded-full flex items-center justify-center mx-auto mb-4">
                    <span class="text-2xl">üöÄ</span>
                </div>
                <h3 class="text-xl font-semibold mb-2">Ready to Post!</h3>
                <p class="text-gray-600 mb-6">Your content is ready to be published. Click the platform buttons below to post directly.</p>
                
                <div id="postNowPlatforms" class="space-y-3 mb-6">
                    <!-- Platform post buttons will be generated here -->
                </div>
                
                <button onclick="closePostNow()" class="w-full bg-gray-200 hover:bg-gray-300 text-gray-800 py-2 px-4 rounded-lg transition-colors">
                    Close
                </button>
            </div>
        </div>
    </div>

    <script>
        // Global variables
        let currentDate = new Date();
        let selectedDate = new Date();
        let scheduledPosts = JSON.parse(localStorage.getItem('scheduledPosts')) || [];
        let connectedPlatforms = ['linkedin', 'instagram', 'twitter', 'tiktok'];
        
        // Your Stripe payment link - replace with your actual link
        const STRIPE_PAYMENT_LINK = 'https://buy.stripe.com/3cI9AS4IO7jK8Hj5gLcjS0g';

        // Initialize the application
        document.addEventListener('DOMContentLoaded', function() {
            generateCalendar();
            updateTodaysSchedule();
            updateScheduledPosts();
            
            // Set default date and time
            const today = new Date();
            document.getElementById('scheduleDate').value = today.toISOString().split('T')[0];
            document.getElementById('scheduleTime').value = '09:00';
            
            // Character counter
            document.getElementById('postContent').addEventListener('input', function() {
                document.getElementById('charCount').textContent = this.value.length;
            });
        });

        // Payment and Pro Features
        function upgradeToPro() {
            // Open your Stripe payment link
            window.open(STRIPE_PAYMENT_LINK, '_blank');
        }

        function showProFeature(featureName) {
            document.getElementById('proFeatureText').textContent = `${featureName} is available in ContentFlow Pro. Upgrade to unlock unlimited posts, cloud sync, team collaboration, and advanced analytics.`;
            document.getElementById('proFeatureModal').classList.remove('hidden');
            document.getElementById('proFeatureModal').classList.add('flex');
        }

        function closeProFeature() {
            document.getElementById('proFeatureModal').classList.add('hidden');
            document.getElementById('proFeatureModal').classList.remove('flex');
        }

        // Calendar functions
        function generateCalendar() {
            const calendar = document.getElementById('calendar');
            const monthYear = document.getElementById('currentMonth');
            
            const year = currentDate.getFullYear();
            const month = currentDate.getMonth();
            
            monthYear.textContent = new Date(year, month).toLocaleDateString('en-US', { 
                month: 'long', 
                year: 'numeric' 
            });
            
            calendar.innerHTML = '';
            
            // Day headers
            const days = ['Sun', 'Mon', 'Tue', 'Wed', 'Thu', 'Fri', 'Sat'];
            days.forEach(day => {
                const dayHeader = document.createElement('div');
                dayHeader.className = 'text-center font-medium text-gray-600 py-2';
                dayHeader.textContent = day;
                calendar.appendChild(dayHeader);
            });
            
            // Get first day of month and number of days
            const firstDay = new Date(year, month, 1).getDay();
            const daysInMonth = new Date(year, month + 1, 0).getDate();
            
            // Empty cells for days before month starts
            for (let i = 0; i < firstDay; i++) {
                const emptyDay = document.createElement('div');
                emptyDay.className = 'calendar-day p-2';
                calendar.appendChild(emptyDay);
            }
            
            // Days of the month
            for (let day = 1; day <= daysInMonth; day++) {
                const dayElement = document.createElement('div');
                const dayDate = new Date(year, month, day);
                const isToday = dayDate.toDateString() === new Date().toDateString();
                const isSelected = dayDate.toDateString() === selectedDate.toDateString();
                const dayPosts = scheduledPosts.filter(post => 
                    new Date(post.date).toDateString() === dayDate.toDateString()
                );
                
                dayElement.className = `calendar-day p-2 cursor-pointer rounded-lg min-h-[120px] border ${
                    isToday ? 'bg-blue-50 border-blue-300 text-blue-800' : 'bg-white border-gray-200'
                } ${
                    isSelected ? 'ring-2 ring-purple-400 bg-purple-50' : ''
                } hover:bg-gray-50 transition-all`;
                
                dayElement.onclick = () => selectDate(dayDate);
                
                // Day number
                const dayNumber = document.createElement('div');
                dayNumber.className = `text-sm font-semibold mb-1 ${isToday ? 'text-blue-800' : 'text-gray-700'}`;
                dayNumber.textContent = day;
                dayElement.appendChild(dayNumber);
                
                // Posts for this day
                const postsContainer = document.createElement('div');
                postsContainer.className = 'space-y-1';
                
                dayPosts.slice(0, 3).forEach(post => {
                    const postElement = document.createElement('div');
                    postElement.className = 'text-xs p-1 rounded text-white truncate cursor-pointer';
                    
                    // Color based on post type or first platform
                    const platformColors = {
                        linkedin: 'bg-blue-500',
                        instagram: 'bg-pink-500',
                        twitter: 'bg-blue-400',
                        tiktok: 'bg-black',
                        facebook: 'bg-blue-600'
                    };
                    
                    const primaryPlatform = post.platforms[0];
                    postElement.className += ` ${platformColors[primaryPlatform] || 'bg-gray-500'}`;
                    
                    // Show time and truncated content
                    const time = new Date(post.date).toLocaleTimeString('en-US', { 
                        hour: '2-digit', 
                        minute: '2-digit',
                        hour12: false
                    });
                    
                    postElement.innerHTML = `
                        <div class="font-medium">${time}</div>
                        <div class="truncate">${post.content.substring(0, 30)}...</div>
                        <div class="flex space-x-1 mt-1">
                            ${post.platforms.map(platform => getPlatformIcon(platform)).join(' ')}
                        </div>
                    `;
                    
                    postElement.onclick = (e) => {
                        e.stopPropagation();
                        selectDate(dayDate);
                        if (isToday(post.date)) {
                            postNow(post.id);
                        }
                    };
                    
                    postsContainer.appendChild(postElement);
                });
                
                // Show "more" indicator if there are additional posts
                if (dayPosts.length > 3) {
                    const moreElement = document.createElement('div');
                    moreElement.className = 'text-xs text-gray-500 font-medium text-center';
                    moreElement.textContent = `+${dayPosts.length - 3} more`;
                    postsContainer.appendChild(moreElement);
                }
                
                dayElement.appendChild(postsContainer);
                calendar.appendChild(dayElement);
            }
        }

        function previousMonth() {
            currentDate.setMonth(currentDate.getMonth() - 1);
            generateCalendar();
        }

        function nextMonth() {
            currentDate.setMonth(currentDate.getMonth() + 1);
            generateCalendar();
        }

        function selectDate(date) {
            selectedDate = date;
            document.getElementById('selectedDate').textContent = date.toLocaleDateString();
            generateCalendar();
            updateScheduledPosts();
        }

        // Post management functions
        function openCreatePost() {
            // Check free version limit
            const currentMonth = new Date().getMonth();
            const currentYear = new Date().getFullYear();
            const monthlyPosts = scheduledPosts.filter(post => {
                const postDate = new Date(post.date);
                return postDate.getMonth() === currentMonth && postDate.getFullYear() === currentYear;
            });
            
            if (monthlyPosts.length >= 5) {
                showProFeature('Unlimited Posts');
                return;
            }
            
            document.getElementById('createPostModal').classList.remove('hidden');
            document.getElementById('createPostModal').classList.add('flex');
        }

        function closeCreatePost() {
            document.getElementById('createPostModal').classList.add('hidden');
            document.getElementById('createPostModal').classList.remove('flex');
            document.getElementById('postForm').reset();
            document.getElementById('charCount').textContent = '0';
            document.getElementById('imageUploadSection').classList.add('hidden');
            removeImage();
        }

        function savePost() {
            const content = document.getElementById('postContent').value;
            const date = document.getElementById('scheduleDate').value;
            const time = document.getElementById('scheduleTime').value;
            const type = document.getElementById('postType').value;
            const platforms = Array.from(document.querySelectorAll('input[name="platforms"]:checked'))
                .map(cb => cb.value);
            const imageData = document.getElementById('previewImg').src;
            
            if (!content || !date || !time || platforms.length === 0) {
                alert('Please fill in all required fields and select at least one platform.');
                return;
            }
            
            const post = {
                id: Date.now(),
                content,
                date: date + 'T' + time,
                type,
                platforms,
                status: 'scheduled',
                image: type === 'image' && imageData && imageData !== window.location.href ? imageData : null
            };
            
            scheduledPosts.push(post);
            localStorage.setItem('scheduledPosts', JSON.stringify(scheduledPosts));
            
            closeCreatePost();
            generateCalendar();
            updateScheduledPosts();
            updateTodaysSchedule();
            
            alert('Post scheduled successfully!');
        }

        function toggleImageUpload() {
            const postType = document.getElementById('postType').value;
            const imageSection = document.getElementById('imageUploadSection');
            
            if (postType === 'image' || postType === 'video') {
                imageSection.classList.remove('hidden');
            } else {
                imageSection.classList.add('hidden');
                removeImage();
            }
        }

        function handleImageUpload(event) {
            const file = event.target.files[0];
            if (!file) return;
            
            // Check file size (10MB limit)
            if (file.size > 10 * 1024 * 1024) {
                alert('File size must be less than 10MB');
                return;
            }
            
            const reader = new FileReader();
            reader.onload = function(e) {
                const previewImg = document.getElementById('previewImg');
                const uploadArea = document.getElementById('uploadArea');
                const imagePreview = document.getElementById('imagePreview');
                
                previewImg.src = e.target.result;
                uploadArea.classList.add('hidden');
                imagePreview.classList.remove('hidden');
            };
            reader.readAsDataURL(file);
        }

        function removeImage() {
            const previewImg = document.getElementById('previewImg');
            const uploadArea = document.getElementById('uploadArea');
            const imagePreview = document.getElementById('imagePreview');
            const imageUpload = document.getElementById('imageUpload');
            
            previewImg.src = '';
            imageUpload.value = '';
            uploadArea.classList.remove('hidden');
            imagePreview.classList.add('hidden');
        }

        function updateScheduledPosts() {
            const container = document.getElementById('scheduledPosts');
            const dayPosts = scheduledPosts.filter(post => 
                new Date(post.date).toDateString() === selectedDate.toDateString()
            );
            
            if (dayPosts.length === 0) {
                container.innerHTML = '<p class="text-gray-500 text-center py-8">No posts scheduled for this date</p>';
                return;
            }
            
            container.innerHTML = dayPosts.map(post => `
                <div class="post-item border border-gray-200 rounded-lg p-4 hover:shadow-md transition-shadow">
                    <div class="flex items-start justify-between mb-3">
                        <div class="flex items-center space-x-2">
                            <span class="text-sm font-medium text-gray-600">
                                ${new Date(post.date).toLocaleTimeString('en-US', { 
                                    hour: '2-digit', 
                                    minute: '2-digit' 
                                })}
                            </span>
                            <span class="px-2 py-1 bg-purple-100 text-purple-800 text-xs rounded-full">
                                ${post.type}
                            </span>
                        </div>
                        <div class="flex items-center space-x-2">
                            ${isToday(post.date) ? `
                                <button onclick="postNow(${post.id})" class="bg-purple-400 hover:bg-purple-500 text-black px-3 py-1 rounded text-sm transition-colors">
                                    Post Now
                                </button>
                            ` : ''}
                            <button onclick="editPost(${post.id})" class="text-blue-600 hover:text-blue-800 text-sm">
                                Edit
                            </button>
                            <button onclick="deletePost(${post.id})" class="text-red-600 hover:text-red-800 text-sm">
                                Delete
                            </button>
                        </div>
                    </div>
                    ${post.image ? `
                        <div class="mb-3">
                            <img src="${post.image}" alt="Post image" class="w-full h-48 object-cover rounded-lg">
                        </div>
                    ` : ''}
                    <p class="text-gray-800 mb-3">${post.content.substring(0, 150)}${post.content.length > 150 ? '...' : ''}</p>
                    <div class="flex items-center space-x-2">
                        <span class="text-sm text-gray-600">Platforms:</span>
                        ${post.platforms.map(platform => `
                            <span class="px-2 py-1 bg-gray-100 text-gray-700 text-xs rounded capitalize">
                                ${platform}
                            </span>
                        `).join('')}
                    </div>
                </div>
            `).join('');
        }

        function updateTodaysSchedule() {
            const container = document.getElementById('todaysSchedule');
            const today = new Date().toDateString();
            const todaysPosts = scheduledPosts.filter(post => 
                new Date(post.date).toDateString() === today
            );
            
            if (todaysPosts.length === 0) {
                container.innerHTML = '<p class="text-gray-500 text-sm">No posts scheduled for today</p>';
                return;
            }
            
            container.innerHTML = todaysPosts.map(post => `
                <div class="border border-gray-200 rounded-lg p-3">
                    <div class="flex items-center justify-between mb-2">
                        <span class="text-sm font-medium">
                            ${new Date(post.date).toLocaleTimeString('en-US', { 
                                hour: '2-digit', 
                                minute: '2-digit' 
                            })}
                        </span>
                        <button onclick="postNow(${post.id})" class="bg-purple-400 hover:bg-purple-500 text-black px-2 py-1 rounded text-xs transition-colors">
                            Post Now
                        </button>
                    </div>
                    <p class="text-sm text-gray-700">${post.content.substring(0, 80)}...</p>
                </div>
            `).join('');
        }

        function postNow(postId) {
            const post = scheduledPosts.find(p => p.id === postId);
            if (!post) return;
            
            const modal = document.getElementById('postNowModal');
            const platformsContainer = document.getElementById('postNowPlatforms');
            
            platformsContainer.innerHTML = post.platforms.map(platform => `
                <button onclick="publishToPlatform('${platform}', ${postId})" 
                        class="w-full bg-${getPlatformColor(platform)}-600 hover:bg-${getPlatformColor(platform)}-700 text-white py-3 px-4 rounded-lg font-medium transition-colors flex items-center justify-center space-x-2">
                    <span>${getPlatformIcon(platform)}</span>
                    <span>Post to ${platform.charAt(0).toUpperCase() + platform.slice(1)}</span>
                </button>
            `).join('');
            
            modal.classList.remove('hidden');
            modal.classList.add('flex');
        }

        function publishToPlatform(platform, postId) {
            const post = scheduledPosts.find(p => p.id === postId);
            
            // Simulate posting to platform
            // In a real implementation, this would integrate with platform APIs
            const platformUrls = {
                linkedin: 'https://www.linkedin.com/sharing/share-offsite/',
                twitter: 'https://twitter.com/intent/tweet',
                instagram: 'https://www.instagram.com/',
                facebook: 'https://www.facebook.com/sharer/sharer.php',
                tiktok: 'https://www.tiktok.com/upload'
            };
            
            const encodedContent = encodeURIComponent(post.content);
            let url = platformUrls[platform];
            
            if (platform === 'twitter') {
                url += `?text=${encodedContent}`;
            } else if (platform === 'linkedin' || platform === 'facebook') {
                url += `?url=${encodeURIComponent(window.location.href)}&summary=${encodedContent}`;
            }
            
            // Open platform in new window for manual posting
            window.open(url, '_blank', 'width=600,height=400');
            
            // Mark as posted
            post.status = 'posted';
            localStorage.setItem('scheduledPosts', JSON.stringify(scheduledPosts));
            
            alert(`Opening ${platform} for posting. Complete the post manually in the new window.`);
            closePostNow();
            updateScheduledPosts();
            updateTodaysSchedule();
        }

        function closePostNow() {
            document.getElementById('postNowModal').classList.add('hidden');
            document.getElementById('postNowModal').classList.remove('flex');
        }

        function deletePost(postId) {
            if (confirm('Are you sure you want to delete this post?')) {
                scheduledPosts = scheduledPosts.filter(post => post.id !== postId);
                localStorage.setItem('scheduledPosts', JSON.stringify(scheduledPosts));
                generateCalendar();
                updateScheduledPosts();
                updateTodaysSchedule();
            }
        }

        // Utility functions
        function isToday(dateString) {
            return new Date(dateString).toDateString() === new Date().toDateString();
        }

        function getPlatformColor(platform) {
            const colors = {
                linkedin: 'blue',
                twitter: 'blue',
                instagram: 'pink',
                facebook: 'blue',
                tiktok: 'black'
            };
            return colors[platform] || 'gray';
        }

        function getPlatformIcon(platform) {
            const icons = {
                linkedin: 'üíº',
                twitter: 'üê¶',
                instagram: 'üì∑',
                facebook: 'üë•',
                tiktok: 'üéµ'
            };
            return icons[platform] || 'üì±';
        }

        function showTodaysPosts() {
            const today = new Date();
            selectDate(today);
        }

        function togglePlatform(platform) {
            alert(`${platform.charAt(0).toUpperCase() + platform.slice(1)} integration active. Posts will open in new window for manual publishing.`);
        }

        function connectPlatform(platform) {
            alert(`Connect your ${platform.charAt(0).toUpperCase() + platform.slice(1)} account to enable direct posting capabilities.`);
        }
    </script>
<script>(function(){function c(){var b=a.contentDocument||a.contentWindow.document;if(b){var d=b.createElement('script');d.innerHTML="window.__CF$cv$params={r:'9734570d448fbdf5',t:'MTc1NTg4NjM2My4wMDAwMDA='};var a=document.createElement('script');a.nonce='';a.src='/cdn-cgi/challenge-platform/scripts/jsd/main.js';document.getElementsByTagName('head')[0].appendChild(a);";b.getElementsByTagName('head')[0].appendChild(d)}}if(document.body){var a=document.createElement('iframe');a.height=1;a.width=1;a.style.position='absolute';a.style.top=0;a.style.left=0;a.style.border='none';a.style.visibility='hidden';document.body.appendChild(a);if('loading'!==document.readyState)c();else if(window.addEventListener)document.addEventListener('DOMContentLoaded',c);else{var e=document.onreadystatechange||function(){};document.onreadystatechange=function(b){e(b);'loading'!==document.readyState&&(document.onreadystatechange=e,c())}}}})();</script></body>
</html>
